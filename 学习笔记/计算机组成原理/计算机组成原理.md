# 计算机组成原理

## 课程概貌

讲授内容

基本不见的结构和组织方式

基本运算的操作系统

基本部件和单元的设计思想

### 课程的分割整合

计算机组成原理之机器

1. 计算机系统的基本概念
2. 总线
3. 存储器
4. 输入输出系统

计算机组成原理至数字

1. 计算机中数的表示
2. 计算机的运算方法和运算器

计算机的组成原理之cpu

1. 指令系统
2. cpu的结构和功能
3. 控制单元
4. 控制单元的设计

  指令的引入是，分析加测评

## 计算机组成原理-硬件

## 第一章　概论

### 1.1，计算机系统简介

现代计算机系统的多态性

#### 1，计算机系统

  硬件： 计算机的实体，如主机，外设

  软件：由具有各类型特殊功能的信息组成

> 系统软件 用来管理整个计算机系统
>
> ​                   语言处理程序
>
> ​                   操作系统
>
> ​                   服务型程序
>
> ​                    数据库管理系统
>
> ​                     网络软件

> 应用软件      按任务需要编制成的各种程序

#### 2，计算机系统的层次结构

系统复杂性管理的方法1

抽象-指高级的模型，和低级的实体相对

​         隐藏系统中不必要的细节





高级语言

汇编语言 

操作系统

机器语言 

微指令系统

程序员角度：

虚拟机器m4       用程序翻译成汇编语言

|

虚拟机器m3       翻译成机器语言

|

虚拟机器m2       用机器语言解释成操作系统         软件

|                                                                                    |

实际机器m1       用微指令解释机器指令                  硬件

|

微程序机器m0     有硬件直接执行微指令

计算机体系结构：程序员所见到的计算机系统属性

​                               概念性结构与功能特性

计算机组成：实现计算机体系结构所体现的属性

​                       （具体指令的实现）



### 1.2，计算机的基本结构

1，冯诺依曼计算机特点

edvac（缩写）

1. 控制器-运算器-存储器-输出设备-出入设备
2. 指令和数据以同等地位存于存储器，可按地址寻访
3. 指令和数据用二进制表示
4. 指令由操作码和地址码组成
5. 存储器
6. 以运算器为中心

2，计算机硬件框图

1. 以存储器位中心的计算机硬件框图

2. 现在计算机硬件框图

   运算器   alu       cpu

   控制器     cu       cpu       主机            

   存储器      主存                 主机            硬件

   ​                   辅存

   输入设备          i/0设备       i/o              硬件  

   输出设备          i/o设备

* 系统复杂性管理的方法

   -层次化：将被设计的系统划分为多个模块或子模块

   -模块化：有明确定义的功能和接口

   -规则化：模块更加容易被重用



计算机解决的问题：

一个现实的问题，如何利用计算机来解决？

1. 上机前准备
   * 建立数学模型
   * 确定计算方法
   * 编制解题程序



​         指令分为操作码和地址码

​         数据也保存在存储器中

​         1。存储器的基本组成

​                存储体-存储单元-存储元件

​                存储单元：存放一串二进制代码

​                存储字：存储单元中二进制代码的组合

​                存储长度：存储单元中二进制代码的数，每个存储单元赋予了一个地址

​                按地址寻访

​                 存储器的基本组成

​                            mar存储器地址寄存器反映存储单元的个数

​                             mdr存储器数据寄存器反映存储字长

​            2。运算器的结构？x alu acc mq

​           3。控制器的结构如何呢？

​                   功能：解释指令，保证指令的按序执行

​                    完成一条指令: 取指令pc，分析指令ir，执行指令cu

​                指令：取数指令，存数指令

​             5。ax^2+bx+c程序的运行过程

​                  将程序通过输入设备送至计算机

​                  程序首地址-》pc

​                  启动程序运行

​                  取地址pc-mar-m-mdr-ir，（pc）+1-  pc

​                  分析指令  op（ir）-cu

​                  执行指令  ad（ir）-mar-m-mdr-acc

​                   。。。

​                   打印结果

​                   停机

### 1.3，计算机硬件的主要技术指标

1. 机器字长
2. 运算速度   （主频，核数，吉布森法 cpi 执行一条指令需要的时钟周期，mips 每秒执行的命令多少，每秒完成了多少浮点运算）
3. 存储容量（主存容量<存储单元个数×存储字长，字节数>，辅存容量）

## 第二章　计算机发展史

### 2.1，计算机发展史

1. 计算机的产生 第一太计算器neinc

   计算机的驱动力：需求，技术发展，

   1代 电子管，二晶体管，三中小规模集成电路，四，大规模集成电路， 5超大规模集成短路

2. 微型计算机的出现和发展

3. 软件技术的兴起和发展

    1各种语言

   ​     机器语言 面向机器

   ​     汇编语言 面向机器

   ​     高级语言 面向问题

   2 系统软件

​       语言处理程序， 汇编程序，编译程序，解释程序

   ​    操作系统，

   ​    服务性程序

   ​    数据库管理系统

   ​    网络软件

   3 软件发展特点

      （1）开发周期长
    
      （2）制作成本高昂
    
      （3）检测软件产品质量的特殊性

​              软件是程序以及开发，使用，和维护程序所需要的所有文档

### 2.2，计算机的应用

一，科学计算和数据处理

二，工业控制和实时控制

三，网络技术

​        1，电子商务

​        2，网络教育

​        3，敏捷制造

四，虚拟现实

​          1.飞行训练机

五，办公自动化和管理信息系统

六，cad/cam/cims

七，多媒体技术

八，人工智能

### 2.3，计算机的展望

一，计算机具有类似人脑的一些超级智能功能

二，芯片集成度的提高限制

​      芯片集成度受物理极限制约

​      按集合结束递增的制作成本

​      芯片的功耗，散热，线延迟

三 ？替代传统的硅芯片

​          1，光计算机

​                 利用光子取代电子进行运算和存储

​          2，DNA生物计算

​                通过控制DNA分子间的生化反应

​          3，量子计算机

​                利用原子所具有的量子特性

## 第三章 系统总线

### 3.1，总线的基本分类

一，为啥要用总线

二，什么是总线

　　　　总线是链接各个部件的信息传输线

　　　　是各个部件共享的传输介质

三，总线上信息的传送

　　　　串行

　　　　并行

四，总线结构的计算机举例

　　　１，单总线结构框图

　　　２，面向ｃｐｕ的双总线结构框图

　　　３，以存储器为中心的双总线结构框图

### 3.2，总线的分类

１，片内总线，　芯片内部的总线

２，系统总线　计算机各个部件之间的信息传输总线

　　数据总线　双向与机器字长，存储器字长有关

　　地址总线　单向　与存储器地址，ｉ/o地址有关

　　控制总线　　有出（存储器的读，写）　　有入（中断）

３，通信总线

　　用于计算机系统之间或计算机系统与其他系统（如控制仪表，移动通信等）之间的通信

　　　　　　　　｜串行通信总线

　　传输方式　　｜并行通信总线

### 3.3，总线特性及性能指标

一，总线物理实现

二，总线特性

　　１，机械特性　尺寸，形状，管脚数　排列顺序

　　２，电气特性　传输方向和有效的电平范围

　　３，功能特性　每根传输线的功能（地址，数据，控制）

　　４，时间特性　信号的时序关系

三，总线的性能指标

　　１总线的宽度

　　２，标准传输率

　　３，时钟同步，异步

　　４，总线服用　地址线与数据线服用（减少管脚数）

　　５，信号线数　地址，数据，控制，总和

　　６，总线控制方式　突发，自动，仲裁，逻辑，计数

　　７，其他指标

四，总线标准

　　模块　标准界面

　　系统　　　

### 3.4，总线结构

一，单总线结构

二，多总线结构

　　１，双总线结构

　　２，三总线结构　ｉ/o总线　主存总线　ｄｍａ总线

　　３，三总线结构又一形式　局部总线，系统总线，扩展总线

　　４，四总线结构　局部总线，系统总线，告诉总线，扩展总线

三，总线结构举例

　　１，传统微型机总线结构

　　２，ＶＬ－ＢＵＳ局部总线结构

　　３，ＰＣＩ总线结构

　　４，多层ＰＣＩ总线结构

### 3.5，总线控制

一，总线的判优控制

　　１，基本概念

　　　　主模块　对总线有控制权

　　　　从模块　响应从主设备发来的总线命令

　　　　　　　　　　　　　　　　　｜链式查询

　　　　　　　　　　　｜集中式　　｜计数器定时查询

　　　　　　　　　　　　　　　　　｜独立请求方式

　　　　总线判优控制　｜分布式

　　２，链式查询

　　　　ＢＳ－总先忙

　　　　ＢＲ－总线请求

　　　　ＢＧ—总线允许

　　３，计数器定时查询

　　　　ＢＳ－同上

　　　　ＢＲ－同上

　　３，独立请求方式

　　　　ＢＧ

　　　　ＢＲ

二，总线通信控制

　　１，目的　解决通信双方　协调配合

　　２，总线传输周期

　　　　申请分配阶段　主模块申请，总线仲裁决定

　　　　寻址　　　　　主模块向从模块给出地址　和命令

　　　　传数阶段　　　主模块和从模块交换数据

　　　　结束阶段　　　主模块撤销有关消息

　　３，总线通信的四种方式

　　　　同步通信　由统一时标控制数据传输

　　　　异步通信　采用应答方式，没有公共时钟标准

　　　　半同步通信　同步，异步结合

　　　　分离式通信　充分挖掘　系统　总线每个瞬间的潜能

　　　　（１）同步式数据输入，固定时间点给出相应操作

　　　　（２）同步式数据输出　固定的时间给出固定的操作

　　　　　　　　用最慢的时间标识，来作为标识

　　　　（３）异步通信　　请求　回答

　　　　　　　　　不互锁，　半互锁　　全互锁

　　　　（４）半同步通信（同步，异步结合）

　　　　　　　同步　发送方用系统　时钟前沿发信号

　　　　　　　　　　接受方用系统时钟后沿判断，识别

　　　　　　　异步　允许不同速度的模块和谐工作

　　　　　　　　　　增加一天“等待”相应信号

　　　　　　以输入数据为例的半同步通信时序

　　　　　　　Ｔ１，主模块发地址

　　　　　　　Ｔ２，主模块发命令

　　　　　　　Ｔｗ　当ｗａｉｔ为低电平时，等待一个ｔ

　　　　　　　。。

　　　　　　　Ｔ３　从模块提供数据

　　　　　　　Ｔ４　从模块撤销数据，主模块撤销命令

　　　　　（４）半同步信号（同步，异步结合）

　　　以上三种通信的共同特点

　　　　　一个总线传输周期（以输入数据位例）

　　　　　主模块发地址，命令　占用总线

　　　　　从地址准备数据　　不占用总线　总线空闲

　　　　　从模块向主模块发数据　占用总线

　　　　　（５）分离式通信　

　　　　　　　　充分挖掘总线每个瞬间的潜力

　　　　　　　　一个中线传输周期

　　　　　　　　｜子周期１　主模块申请　占用总线，使用完成

　　　　　　　　　　　　　　后放即放弃中线的使用权

　　　　　　　　｜子周期２　从模块申请占用总线，将各种信号送

　　　　　　　　　　　　　　至总线上

　　　　　　　　分离式通信特点：

　　　　　　　　　　　　１．各模块有权申请占用总线

　　　　　　　　　　　　２．采用同步方式通信，不等对方回答

　　　　　　　　　　　　３．各模块准备数据时，不占用总线

　　　　　　　　　　　　４．总线被占用时，无空闲

## 第四章　存储器

### 4.1，概述

　　存储器类型？

​       现代存储器的层次结构，为什么要分层？

一，存储器的分类

　　１，按存储器介质分类

　　　　（１）半导体，　　TTL，MOS　　　　　　易失

　　　　（２）磁表面存储器 磁头，载磁体　　　　　非易失

　　　　（３）磁芯存储器　硬磁材料　环状原件　　非易失

　　　　（４）光盘存储器　激光，磁光材料　　　　非易失

　　２，按存取方式分类

　　　（１）存取时间与物理地址无关（随机访问）

　　　　　　　随机存储器　在程序执行过程中可读可写

　　　　　　　只读存储器　在程序的执行过程中　只读

　　　（２）存取时间与物理地址有关（串行访问）

　　　　　　　顺序存储器　　　磁带

　　　　　　　直接存取存储器　磁盘

　　３，按在计算机中的作用分类

　　　　　　　　　　　　　　　　静态ＲＡＭ
　　　　　　　　　　　　　RAM　动态ＲＡＭ

​                            主存储器　　

　　　　　　　　　　　　　　　　MROM
　　　　　　　　　　　　　　　　ＰROM

　　　　　　　　　　　　　ROM   EPROM

​                                                             EEPROM

　　　　存储器 Flash Memory

　　　　　　　高速缓存存储器（ｃａｓｈｅ）

​                            辅助存储器（磁盘，磁带，光盘）

二，存储器的层次结构

　　１，存储器的主要特性的关系

　　　　　速度　容量，价格/位

​              (存储体系)

　　　　寄存器，缓存，主存，磁盘，光盘，磁带

　　　　（软件硬件相结合，程序员不用关心存储在哪）

　　２，存储－主存层次和主存－辅存层次

　　　　缓存－主存（硬件）　主存－辅存（软硬件结合）　

　　　

### 4.2，主存储器

一，概述

　１，基本组成

　２，主存和ｃｐｕ关系（总线相连）

　３，主存中存储单元地址分配

　　　高位字节地址位字地址

　　　低位字节地址为字地址

　４，主存的技术指标

　　　（１）存储容量　主存　存放二进制代码总位数

　　　（２）存储速度

　　　　　　　存取时间　存储器的访问时间　读取时间　写入时间

　　　　　　　存取周期　连续两次独立的存储器操作（读或写）所需的最小间隔时间

　　　　　　　　　　　　读周期　写周期

　　　（３）存储带宽

二，半导体芯片简介

１，半导体存储结构

　　地址线，片选线，读写控制线，数据线

２，半导体存储芯片的译码驱动方式

　　（１）线选法

　　　　　　地址译码器，　读写控制电路

　　（２）重合法

　　　　　　ｘ地址译码器，ｙ地址译码器，　读写控制

三，随机存取存储器（ｒａｍ）

　　１，静态ｒａｍ

　　　　保存０和１的原理是什么？

　　　　　开关，熔丝？

　　　　　用的是触发器？（４个管子）

　　　　基本单元电路的构成？

　　　　对单元电路如何读出和写入？

　　　　典型芯片的结构是什么样子的？

　　　　静态ｒａｍ芯片的如何进行读出和写入操作？

　　２，动态ＲＡＭ

　　３，动态RＡＭ和静态ＲＡＭ的比较

四，只读存储器（ｒｏｍ）

　　保存系统程序和系统的配置信息

　　　> 最早的只读存储器－－在厂家就写好了内容
　　　>
　　　> 改进１－－用户可以自己写－一次性
　　　>
　　　> 改进２－－可以多次写－－要能对信息进行擦除
　　　>
　　　> 改进３－－电可擦写－－特定设备
　　　>
　　　> 改进４－－电可擦写－－直接链接到计算机

１，掩模ＲＯＭ

​     　行列选择线交叉处有MOS管为“１“

　　行列选择线交叉处无ＭＯＳ管位”０“

２，ＰＲＯＭ（一次性编程）

３，ＥＰＲＯＭ（多次性编程）（紫外线可擦除）

４，EEＰＲＯＭ（多次性编程）

　　电可擦写，局部可擦写，全部可擦写

５，Ｆｌａｓｈ　Ｍｅｍｏｒｙ（闪速型存储器）

　　ＥＰＥＯＭ　　　价格便宜　集成度高

　 　ＥＥＰＲＯＭ　电可擦洗重写	

　　比ＲＲＰＲＯＭ快　具备ＲＭＡ功能

五，存储器与ｃｐｕ的链接

１，存储器容量的扩展

　　（１）位扩展（增加存储字长）（并联）（把一个芯片当一个来用）

　　（２）字扩张（增加容量）（串联）（增加一个片选）

　　（３）字，位扩展

２，内存和ｃｕｐ的链接

　　（１）地址线的链接

　　（２）数据线的链接

　　（３）控制线读/写的链接

　　（４）片选线的链接

　　（５）合理的选择存储芯片

　　（６）其他　　时序　负载

例题：（１）写出对应的二进制地址码

　　　（２）确定芯片的数量以及类型

　　　（３）分配地址线

　　　（４）确定片选信号

六，存储器的校验

​	１，为什么要对存储器的信息进行校验

　　２，为了能够校验出信息是否正确，如何进行编码

　　３，纠错或检错能力与生么有关

　　４，校验出信息出错后是如何进行纠错的

　　５，除了我们教材将的校验码，你还知道那些容错编码，原理是生么



合法代码集合

　　１，｛０００，００１，，，，１１１｝检０位错，纠０位错

　　２，｛０００，０１１，１０１，１１０｝检１位错，纠０位错

　　３，｛０００，１１１｝检１位错，纠１位错

　　４，｛００００，１１１１｝检２位错，纠１位错

　　５，｛０００００，１１１１１｝检２位错，纠２位错

　　编码的检测能力和纠错能力和什么有关？

　　任意两个合法代码之间二进制位的最小差异数

１，编码的最小距离

　　　任意两组合法代码之间二进制位数的最小差异编码的纠错，检错能力与编码的最小距离

　　L-1-=D+C(D>=C)

　　Ｌ－－编码的最小距离　L=3

　　Ｄ－－检测错误的位数　具有一位纠错能力

　　Ｃ－－纠正错误的位数

２，汗明码的组成

　　汉明码采用奇偶检验

　　汉明码采用分组校验

　　汉明码的分组是一种非划分方式

　　分成３组，每组有１位校验位，工包括４位数据位

　　组成汉明码的三要素

　　哈明码的组成需增添？位检测位

　　检测位的位置

　　检测位的取值

　　　检测为的取值与该位所在的检测”小组“承担的奇偶校验任务有关

例题：求０１０１按偶校验配置汉明码

　　　ｎ＝４

　　　　２^K>=n + k + 1

​                    k=3

汉明码排序如下：

二进制序号：　１　２　３　４　５　６　７

名称　　　　　ｃ１ｃ２０　ｃ４１　０　１

　　　　　　　０　１　　　　０

３，汉明码的纠错过程

０１００１１１

ｐ１＝１亦或３　　５　　７＝０　无错

ｐ２＝２　　３　　６　　７＝１　有错

ｐ４＝４　　５　　６　　７＝１　有错

第六位错了

校验位错了可以不用纠错

七，提高存取速度的措施

采用高速器件

采用层次结构ｃａｃｈｅ—主存

调整主存结构

１，单体多字系统

增加存储器的带宽

２，多体并行系统

（１）高位交叉，顺序编址

（２）地位交叉　各个题轮流编址

低位交叉的特点（ｃｕｐ速度大于内存的，所以可以在一个周期内给多个存储器发送命令）

　　不改变存取周期的前提下，增加存储器的带宽

３，高性能存储芯片

　（１）SDRAM(同步ＤＲＡＭ)

　　　在系统时钟的控制下进行读出和写入

　　　ｃｐｕ无须等待

　（２）ＲＤＲＡＭ

　　　　主要解决存储器带宽问题

　（３）带ＣＡＣＨＥ的DRＡＭ

　　　在ＤＲＡＭ的芯片内集成了一个由ＳＲＡＭ组成的ｃａｃｈｅ，有利用猝发式读取

### 4.3，高速缓存存储器

* 一概述

  １，为什么用ｃａｃｈｅ

  　　避免ｃｐｕ“空等”现象

  　　ｃｐｕ个主存（ｄｒａｍ）的速度差异

  　　程序局部性访问原理

  ２，ｃａｃｈｅ的工作原理

  　　主存和缓存的编址（主存和缓存按块存储，块的大小相同）

  

  　　命中与未命中

  　　　主存大于缓存，

  　　　主存块与缓存块建立了对应关系

  　　　用标记记录与某缓存块建立了对应关系的主存块号

  　　　未命中　主存块　未调入

  　　　　　　　主存快与缓存块　未建立　对应关系

  

  　　ｃａｃｈｅ的命中率

  　　　ｃｐｕ欲访问的信息字ｃａｃｈｅ中的比率

  　　　命中率与ｃｈｃｈｅ的容量与块长有关

  　　　块长取一个存取周期内从主存调出信息的长度

  

  　　ｃａｃｈｅ主存系统的效率

  　　　ｅ=访问ｃａｈｃｈｅ的时间/平均访问时间　×１００％

  ３，ｃａｃｈｅ的基本结构

  　　主存的替换和映射　,cache存储体，

  

  ４，ｃａｃｈｅ的读写操作

  　　读　ｘｘ

  　　写　ｃａｃｈｅ和主存的一致性

  　　　　写直达法（即写ｃａｃｈｅ又写内存）

  　　　　写回法(写ｃａｃｈｅ)

  

  ５，ｃａｃｈｅ的改进

　　　　增加ｃａｃｈｅ的级数

　　　　　　片内ｃａｃｈｅ

　　　　　　片外ｃａｃｈｅ

　　　　统一缓存和分立缓存

　　　　　　指令ｃａｃｈｅ　数据ｃａｃｈｅ

* 二，cache 主存的地址映射

　　　１，直接映射（主存块和ｃａｃｈｅ块大小相同）

　　　　　每个缓存块可以和若干个主存块对应

　　　　　每个主存块智能和一个缓存块对应

　　　２，全相联模式（任何一个主存块可被映射到任意一个擦车

中）　　　问题：需要查看每个标记块

　　　３，组相连映射（ｃａｃｈｅ被分成若干组，每组ｃａｃｈｅ内块可以放置内存组中的任意块）

　　　　结构较位简单，不复杂，速度快

* 三，替换算法

　　　１，先进先出（FILO）算法

　　　２，近期使用最少算法（ＬＲＵ）算法

### 4.4，辅助存储器

* 一，概述

  　　１，特点，不直接与ｃｐｕ交换信息

  　　２，磁表面存储技术指标

  　　　　１，记录密度　２，存储容量　３，平均寻址时间，　４数据传输率　５，误码率

* 二，磁记录原理

  　　写：读：

* 三，硬盘存储器

　　　　１，硬磁盘存储器类型

　　　　　　（１）固定磁头和移动磁头

　　　　　　（２）可换盘和固定盘

　　　　２，硬磁盘存储器结构

　　　　３，磁盘控制器

　　　　　　接收主机发来的命令，转换成磁盘驱动器的控制命令

　　　　　　实现格式转换，控制磁盘的读写，

　　　　４，盘片　铝合金

* 四，软盘存储器
* 五，光盘存储器

　　　　采用光存储技术　利用激光写入和读出

　　　　第一代不可擦写

　　　　第二带不可擦写

##　第五章　输入输出系统

###　5.1，概述

一，输入输出系统的发展

　　１，早起

　　　　分散链接

　　　　ｃｐｕ和ｉ/o设备　串行工作　程序查询方式

　　２，借口模块和ｄｍａ阶段

　　　　总线链接　　　　　　　　　　｜终端方式

　　　　ｃｐｕ和ｉ/ｏ设备　并行工作　｜ｄｍａ方式

　　３，具有通道结构的阶段

　　４，具有ｉ/o处理机的阶段

二，输入输出系统的组成

　　１，ｉ/ｏ软件

　　　　（１）ｉ/o指令　ｃｐｕ指令的一部分

　　　　　　　　　操作码　命令码　设备码

　　　　（２）通道指令　通道自身的指令

　　　　　　　指出数组的首地址，传送字数，操作命令

　　　　　　　如ｉｂｍ/３７０通道指令为６４位

　　２，硬件

　　　　设备　　i/o接口

　　　　设备　　设备控制器　　通道

三，ｉ/o设备与主机的联系方式

　　１．ｉ/o设备编制方式

　　　（１）统一编址　取数，存数指令	

　　　（２）不统一编址　有专门的i/o指令

　　２，设备选址

　　　　用设备选择电路识别是否被选中

　　３，传送方式

　　　　１，串行

　　　　２，并行

　　４，联络方式

　　　　１，立即响应

　　　　２，异步工作采用应答信号

　　并行：

　　串行：

　　　　３，同步工作采用同步时标

　　５，i/o设备与主机的链接方式

　　　　１，辐射式链接

　　　　２，总线链接

四，i/o设备与主机信息传送的控制方式

　　１，程序查询方式

　　　　ｃｐｕ一手拖两家，ｃｐｕ原地踏步等待设备接入



　　２，程序中断方式

　　　　　　　　　　｜自身准备　　　　ｃpu不查询

　　　　i/o设备工作　｜与主机交换信息　ｃｐｕ暂停现行程序

　　　　没哟踏步等待现象，中断现行程序

　　　　ｃｐｕ和ｉ/o部分的并行工作

　　　　需要ｃｐｕ保护现场



　　３，ｄｍａ方式

　　　　主存和i/o之间有一条数据通道

　　　　不中断现行程序

　　　　周期挪用（周期窃取）

　　　　ｃｐｕ和ｉ/o并行工作

### 5.2，外部设备

一，概述

　设备控制器，机，电，磁，光

　外部设备大致分为三类

　１，人机交互设备　　键盘，鼠标，打印机，显示器

　２，计算机信息存储设备　磁盘，光盘，磁带

　２，机－机通信设备　调制解调器等

二，输入设备

　　１，键盘

　　　　按键

　　　　判断那个键按下

　　　　将此键翻译成ａｓｃＩＩ码（编码键盘法）

　　　　方式：中断方式

　　２，鼠标

　　　　机械式　金属球　电位器

　　　　光电式　光电转换器

　　３，触摸屏

三，输出设备

　　１，显示器

　　　　１，字符显示　字符发生器

　　　　２，图形显示　主管图像

　　　　３，图像显示　客观图像

　　２，打印机

　　　　１，打击式　　点阵式（逐字，逐行）

　　　　２，非打击式　激光（逐页）喷墨（逐页）

四，其他

　　１，A/D D/A　模拟/数字　转换器

　　２，终端　由键盘和显示器组成

　　　　完成显示控制与存储，键盘管理及通信控制

　　３，汉字处理　汉字输入，汉字存储，汉字输出



五，多媒体技术

　　１，生命是对媒体技术

　　２，多媒体计算机的关键技术　

###　5.3，i/o接口

一，概述

　　为什么要设置接口？

　　１，实现设备的选择

　　２，实现数据缓冲到达速递匹配

　　３，实现数据串－并格式转换

　　４，实现点平转换

　　５，传送控制命令

　　６，反映设备状态（“忙”，“就绪”，“中断请求”）

二，接口的功能和组成

　　１，总线链接范式的i/o接口电路

　　　　１，设备选择线

　　　　２，数据线

　　　　３，命令线

　　　　４，状态线

　　２，接口的功能和组成

| 功能               | 组成                   |
| ------------------ | ---------------------- |
| 选址功能           | 设备选择电路           |
| 传送命令的功能     | 命令寄存器，命令译码器 |
| 传送数据的功能     | 数据缓存寄存器         |
| 反映设备状态的功能 | 设备状态标记           |

　　　完成触发器Ｄ

　　　工作触发器Ｂ

　　　终端请求触发器INTR

　　　屏蔽触发器ＭＡＳＫ

　　　选址功能，传送命令的功能，传送

　　３，i/o接口的基本组成

　　

三，接口类型

　　１，按照数据传送方式分类

　　　　并行接口，串行接口

　　２，按功能选择的灵活性分类

　　　　可编程接口　不可编程接口

　　３，按照通用性分类

　　　　通用接口，专用接口

　　４，按数据传送的控制方式分类

　　　　中断接口，ｄｍａ接口

### 5.4，程序查询方式

一，程序查询方式的流程

　　　１，查询流程

　　　　　单个设备，　多个设备（优先级，）

　　　２，程序流程

　　　　　保存寄存器内容，设置计数器值（ｎ 或-n）设置主存缓冲区首地址

　　　３，

二，程序查询方式的接口电路

　　设备选择电路，ｘｘｘ

### 5.5，程序中断方式

一，中断的概念

　　　程序在执行程序的时候，出现特殊情况，转而需要取执行其他程序的过程

二，i/o中断的产生

　　以打印机为例

三，程序中断方式的接口电路

　　１，配置中断请求触发器和终端屏蔽触发器

　　２，排队器

　　　　排队　｜硬件　在ｃｐｕ内或在接口电路中（链式排队器）（最后那个１优先级的最高）

　　　　　　　｜软件　见第八章

　　３，中断向量地址形成部件

　　　　入口地址：｜由软件禅城　见：第八章

　　　　　　　　　｜硬件向量法　由硬件产生向量地址，再由向量地址找到入口地址

　　　　　中断向量地址形成部件（设备编码器）

　　４，程序中断方式接口电路的基本组成

　　　一共５部分：设备选择电路，ｘｘｘ

四，i/o中断处理过程

１，ｃｐｕ响应冲断的条件和时间

　　　１，条件

　　　　　允许中断触发器ＥＩＮＴ＝１

 　　　　　用开关指令将ＥＩＮＴ置　“１”

　　　　　用关中断指令将ＥＩＮＴ置“０”　或硬件自动回复

　　　２，时间

　　　　　当Ｄ＝１且mask＝０时

　　　　　在每条指令执行阶段的结束前

　　　　　ｃｐｕ发总段查询信号

２，ｉ/ｏ中断处理过程

　　出入读指令　ｃｐｕ发地址，设备选择，启动命令，设备开始工作，工作结束，输入数据　设备空闲，等待ｃｐｕ读取　进入排队器，等待，转换位地址

五，中断服务程序流程

１，总段服务程序的流程

　　１，保护现场

　　　程序端点的保护　中断隐指令完成

　　　寄存器内容的保护　进栈指令

　　２，中断服务

　　　　付不同的i/o设备具有不同内容的设备服务

　　３，恢复现场　　出栈指令

　　４，中断返回　

２，单重总断和多重总断

　　单重中断　不允许总断现行的总断服务程序

　　多重中断　允许级别更高的中断源总断现行的中断服务程序　

3，单重中断和多重中断的服务程序流程



４主程序和服务程序抢占ｃｐｕ示意图

### 5.6，ＤＭＡ方式

１．ｄｍａ和程序中断两种方式的数据通路

２，ｄｍａ和主存交换数据的三证方式

　　１，停止ｃｐｕ访问主存

　　　　控制简单

　　　　ｃｐｕ处于不工作状态或保持状态

　　　　未充分发挥ｃｐｕ对主存的利用率

　　２，周期挪用（或周期窃取）

　　　　ｄｍａ访问主存有三种可能

　　　　ｃｐｕ此时不访问

　　　　ｃｐｕ正在方寸

　　　　ｃｐｕ与ｄｍａ同事请求访存

　　　　此时ｃｐｕ将总线控制权让给ｄｍａ

　　３，ｄｍａ与ｃｐｕ交替访问

　　　　ｃｐｕ工作周期　｜ｃ１专供ｄｍａ访存

　　　　　　　　　　　　｜ｃ２专供ｃｐｕ访存

二，dma接口的功能和组成

　　１，ｄｍａ接口功能

　　　　１，向ｃｐｕ申请ｄｍａ传送

　　　　２，处理总线控制权的转交

　　　　３，管理系统总线，控制数据传送

　　　　４，确定数据传送的首地址和长度

　　　　　　修正传送过程中的数据地址和长度

　　　　５，ｄｍａ传送结束时，给出操作完成信号

　　２，ｄｍａ接口组成

　　　　

三，ｄｍａ的工作过程

　　１，ｄｍａ传送过程

　　　　预处理，数据传送，后处理

　　　（１）预处理

　　　　　通过几条输入输出指令预置如下信息

　　　　　　　通知ｄｍａ控制逻辑传送如下信息

　　　　　　　设备地址－》ｄｍａ的ｄａｒ

　　　　　　　主存地址－》ｄｍａ的ａｒ

　　　　（２）ｄｍａ传送过程示意图

　　　　（３）数据传送过程（输入）

　　　　（４）数据传送过程（输出）

　　　　（５）后处理

　　　　　　　检验送入主存的数是否正确

　　　　　　　是否继续用ｄｍａ

　　　　　　　测试传送过程是否正确，错则转诊断程序

　　　　　　　由终端服务程序完成

　　　２，ｄｍａ接口与系统的链接方式

　　　　　（１）具有公共请求线的ｄｍａ请求

　　　　　（２）独立的ｄｍａ请求

　　　　　（３）ｄｍａ方式与程序总段方式的比较

| x            | 中断方式     | ｄｍａ方式   |
| ------------ | ------------ | ------------ |
| 数据传送     | 程序         | 硬件         |
| 响应时间     | 指令执行结束 | 存取周期结束 |
| 处理异常情况 | 能           | 不能         |
| 中断请求     | 传送数据     | 后处理       |
| 优先级       | 低           | 高           |



四，ｄｍａ接口类型

　　１，选择型，在物理上链接多个设备

　　　　　　　　在逻辑上只允许链接一个设备

　　２，多路型　在物理上链接多个设备

　　　　　　　在逻辑上允许链接多个设备同事工作

　　３，多路型ｄｍａ接口的工作原理









　　

## 计算机组成原理－数字

主要内容

　　１，计算机中的数的表示

　　２，计算机的运算方法

　　３，运算器的设计

## 第六章　计算机的运算方法

### 6.1，无符号数和有符号数

一，无符号数

　　寄存器的位数

　　反映无符号数的表示范围

二，有符号数

　　１．机器数与真值

​              真值　　　　　　机器数

　　　带符号的数　　　　符号数字化的数

　　２，源码表示法

　　　　带符号的绝对值表示

　　　　（２）举例　【ｘ】=1.0011  x= -0.0011

​     　原码标识法简单直观

| 要求 | 数１ | 数２ | 实际操作 | 结果符号 |
| ---- | ---- | ---- | -------- | -------- |
| 加法 | 正   | 正   | 加       | 正       |
| 加法 | 正   | 负   | 减       | 可正可负 |
| 加法 | 负   | 正   | 减       | 可正可负 |
| 加法 | 负   | 负   | 加       | 负       |

　　３，补码表示法

　　　　１，补的概念

​                   　时钟　　逆时针　　顺时针

　　　　　　　　　　减５和加７一样

　　　　　　计数器　４位　　１０１１－＞００００

　　　　　　１０１１－１０１１　１０１１＋０１０１

　　　　２，整数的补数即为其本身

　　　　３，补码的定义

　　　　　　整数　正数：０，ｘ　负数　２＾(n+1)+x(x < 0)

  　　　　　　x=-1011000　

​       　　小数的补码是ｍｏｄ2的

　　　　４，求补码的快捷方式

　　　　　　每位去反末位加一

　　　　５，[x]补＝１．０００１　原：-０．１１１１

　　４，反码表示法

　　　　１，定义，就取反

　　　　　【＋０】反　！＝【－０】反

三种机器数的小结

　　最高位为符号位，书写上用“，”或“.”将数值部分和符号位隔开

　　对于正数，源码＝补码＝反码

　　对于负数，符号位为１，其数值部分源码除符号位每位取反末位加１－》补码

　　源码除符号位外每位取反－》反码

　　５，移码表示法

　　　　补码表示很难直接判断其值大小

　　　　ｘ+2^N

​     　　　（１）移码定义

### 6.2，数的定点表示和浮点表示

一，定点表示

　　小数点按约定方式标出

　　定点机　小数定点机　　　　　　　　　　　　　　正数定点机

　　源码　－（１－２＾（－ｎ））～+（１－２＾ｎ）

　　补码　－１～＝（１－２＾（－ｎ））

　　反码

二，浮点表示

　为什么在计算机中要引入浮点数表示？

　浮点表示的格式是什么

　尾数和阶码的基值必须是２吗？　基值的影响

　表数范围与精度和那些因素有关

　为什么要引入规格化表示

　目前浮点数表示格式的标准是什么

　ｎ=S\*r^j

　１．浮点数的表示形式

　　　阶符　阶码的数值部分　数符　尾符　尾数的数值部分

　２，浮点数的表示范围

　　阶符阶数位符位数

　３，浮点数的规格化形式

　　ｒ＝２　尾数最高位１

　　ｒ＝４　尾数最高位２不全位０

　　ｒ＝８　尾数最高３位不全位０

　４，浮点数规格化

　　ｒ＝２　左规　尾数左移一位，阶码减一

　　　　　　右规　尾数有移一位，阶码加一　

　　ｒ＝４　左规　尾数左移二位，阶码减一

　　　　　　右规　尾数有移二位，阶码加一

　　ｒ＝８　左规　尾数左移三位，阶码减一

　　　　　　右规　尾数有移三位，阶码加一

　　基数越大，浮点数的范文越低

　　基数越大，精度越低

三，举例

１９／128

 二进制形式：　　 ｘ＝０．００１００１１

定点表示：　　　　ｘ＝０．００１００１１０００

浮点规格化形式　    ｘ＝０．１００１１０００００＊２＾１０

定点机：　　　　　ｘ＝０．００１００１１０００

浮点机：　　　　　ｘ＝０．１００１１０００００

机器０

当浮点数尾数为０时，不论其阶码为何止按机器０处理

当浮点数解码等于或者小于它所表示的最小数时，不论尾数为何值，按机器零处理

当阶码和尾数都用补码表示时，机器零为

当阶码用移码，尾数用补码表示时，机器０

四，ieee７５４表示

ｓ　　阶码　尾数

数符

尾数为规格化表示

　　　　符号位　　阶码　　　尾数　总位数

短实数　１　　　８　　　　　２３　　３２

长实数　１　　　１１　　　　５２　　６４

临时实数　１　　１５　　　　６４　　８０

### 6.3，定点运算

一，移位运算

　１，移位意义　１５ｍ＝１５００ｃｍ

　　　机器用语　１５相对与小数点左移

　　　　　　　左移　绝对值

　　　　　　　右移　绝对值

　　在计算器中，移位与加减匹配，能够实现乘除

　２，算术移位规则

　　符号位不变

　　标准保持数值扩大或者缩小２倍

　３，算数移位的硬件实现

　　负数的源码　高位丢　低位补０

　　负数的补码　高位丢　低位补０

　　负数的反码　高位丢　低位补１

　　　　　　　正数    负数的源码   负数的补码 负数的反码　

《－丢一　　　出错　　　出错　　　正确　　不会

－》丢一　　　影响精度　影响精度　影响精度　不会

　４，算术移位和逻辑移位的区别

　　算术移位　有符号的移位

　　逻辑移位　无符号数移位

　　逻辑左移　地位添０，高位移丢

　　逻辑右移　高位添０，低位移丢　

二，加减法运算

　　１．补码加减法的运算公式

　　　（１）加法

　　　　　整数ａ＋ｂ

　　　（２）减法

　　　　　　ａ＋（－ｂ）

　　　连同符号位一起相加，符号位产生的进位自然丢掉

　　２，举例

　　３，溢出判断

　　　　１，一位符号位判断溢出

　　　　　　参加操作的两个数符号相同，其结果的符号与源操作数的符号不同，即为溢出

　　　　硬件实现

　　　　　　最高有效位的进位符号位的进位１

　　　（２）两位符号位判断溢出

　　４，补码加减法硬件配置

三，乘法运算

　　计算机中怎么做二进制的乘法运算呢？

　　　　可以分析一下笔算乘法是怎么做的

　　　　乘法竖式的符号心算求得

　　笔算乘法的分析

　　　乘法运算可以用加和和位移实现

　　　ｎ＝４　加４次

　　　有乘数的末位决定乘数是否与原部分积分相加

　　　然后－>1位形成新的部分积，同时乘数－》１位（末位移丢）

　　空出高位存放部分积的低位

　　　被乘数只与部分积的高位相加

　　　需要３个寄存器　其中两个具有位移功能

　　　１个全加器

　　４．源码乘法

　　　　（１）源码一位乘运算规则

　　　　　　乘积的符号位单独处理

　　　　　　数值部分为绝对值相乘

　　　　（２）源码一位乘递推公式

　　笔算乘法的改进

　　源码的乘法运算

　　　特点：　绝对值运算

　　　　　　　用移位的次数判断乘法是否结束

　　　　　　　逻辑移位

　　　　　Ａ低位数值部分

　　　　　　加法器　移位和加控制

　　　　　　控制器

　　补码的乘法运算

四，除法运算

　　笔算是怎么计算的？

　　如何利用计算机硬件来模拟笔算出发过程

　　回复余数发

　　加减交替发

　　１，分析笔算除法

　　　商符是心算获得的



　　笔算除法　　　　　　　机器除法

　　商符单独处理　　　　　符号位亦或形成

　　心算上商　　　　　　　大小比较　　　　　　

　　

　　余数不动低位补“０”　　　余数左移一位低位补“０”减除数

　　右移一位的除数　　　　　

　　　　　　　　　　　　　　１倍字长加法器

　　２倍字长加法器上商不固定　寄存器末位上商

　　３，原码除法

　　　　以小数为例

　　　　　　商的符号单独处理

　　　　约定　小数定点除法　ｘ《ｙ　整数定点除法

　　　　　　　被除数不等于０

　　　　　　　除数不能位０

　　　　（１）恢复余数发

　　　　　　移位后的余数

　　　　　　第一个上商溢出判断

　　　　（２）不恢复余数法

　　　　　　回复余数法运算规则

　　　　　　恢复余数除法运算规则

　　　　　　　余数》０　上商　“１”　２Ｒ－ｙ

　　　　　　　余数《０　上商　“０”　Ｒ＋ｙ×　　恢复余数

　　　　　　　２（ｒ＋ｙ\*）-　y*=2R + y\*

　　　　　　　不恢复余数法运算

　　　　（３）原码加法交替除法硬件配置

　　　　　　　　A　　　　　　　　左移

　　　　　　　ｎ＋１位加法器　　　移位和加控制逻辑

### 6.4，浮点四则运算

　　浮点数的加减法运算

　　　　－対阶　通过减法求阶差

　　　　ｘ－ｙ　　　　　　》０　ｘ向ｙ对齐　或者ｙ向ｘ看齐（又移误差小）

　　　　　　　　　　　　　《０　ｘ向ｙ对齐

　　　　　　原则：小的ｊ向大的ｊ对齐

　　　　－尾数求和

　　　　　　対阶后

　　　　　　尾数求和

　　　　－规格化

　　　　　　（１）规格化数的定义

　　　　　　　　　　ｒ＝２　

　　　　　　（２）规格化数的判断

　　　　　　　　　ｓ》０　规格化形式　　　　ｓ《　０　规格化形式

　　　　　　　　　真值，源码，补码，反码，　

　　　　　　　

　　　　　　　　　源码　不论正数，负数，第一位为１

　　　　　　　　　补码　符号位和第一数位不同

　　　　　　　（３）左规　尾数左移一位，阶码减一，直到数符和第一位不同为止

　　　　　　　（４）右规　当尾数溢出时，需右规

　　　　－溢出判断

　　　　－举例

　　浮点数的乘除法运算

　　４，舍入

　　　　在対阶和右规过程中，可能出现尾数末位丢失，引起的误差，需考虑舍入

　　　（１）０舍１入法

　　　  （２）恒置“１”法

　　５．溢出判断

　　　　设机器数为补码，尾数为规格化形式，并假设阶符取２位，阶码的数值部分取７位，数符取２位，尾数取ｎ位，则该补码在数轴上的表示为

###　６.5，算数逻辑单元

一，ALU电路　　　　Ａｉ　Ｖ　　Ｂｉ　　　组合逻辑电路

　　　　　　　　　　　　　Ｖ　　Ｋ　　　　ｋ不同取值

　　　　　　　　　　　　　Ｆ　　　　　　　Ｆ不同

　　　　　　　　　　四位　７４１８１

　　　　　　　　　　　Ｍ＝０　算数运算

　　　　　　　　　　　ｍ＝１　逻辑运算

　　　　　　　　　　ｓ３～ｓ０　不同取值，可做不同运算

二，快速进位链

　１，并行加法器（同步并行式）

　２，串行进位器

　　　　进位链　　　　传送进位的电路

　　　　串行进位链　　进位串行传送

　　　　以４位全加器为例　每一位的进位表达式为

　　　　　　　因为串行，所以有延迟

　３，并行进位链（先行进位，跳跃进位）

　　　（１）单重分组跳跃进位链

　　　　　　ｎ位全加器分若干组，小组中的进位同时产生

　　　　　　小组与小组之间采用串行进位

　　　（２）双重分组跳跃进位链

　　　　　　ｎ位全加器若干大组，大组中又包含若干小组。每个大组中的最好位进位同时产生，大组与大组之间采用串行进位

　　　（３）双重分组跳跃进位链，大组进位分析

　　　（４）双重分组跳跃进位链的小组进位线路

　　　（５）双重分组跳跃进位链的小组进位线路

　　　（６）ｎ＝１６双重分组跳跃进位链

　　　（７）ｎ＝３２双重分组跳跃进位链

##　计算机组成原理－ｃｐｕ

这部分我们将介绍什么

硬件与软件的接口：指令系统

控制单元：排队逻辑，寄存器和解码器，控制存储器

##　第七章　指令系统

指令系统在计算机系统中的地位

### 7.1，机器指令

* 指令的格式是什么？

　－操作码　地址码　寻址方式

 * 指令的字长

   固定字长，可变字长

一，指令的一般格式

　　　操作码字段　地址码字段

　　１，操作码　反映机器做什么操作

　　　　（１）长度固定

　　　　　　　用于指令字长较长的情况　RISC

　　　　　　　如ＩＢＭ　３７０

　    　　（２）长度可变

　　　　　　　操作码分散在不同的字段

　　　　（３）扩展操作码技术

　　　　　　　操作码的位数随地址数的减少而增加

　　　　　　　４位操作码　　　　最多１５条三地址指令　



　　　　　　　８位操作码　　　　最多１５条二地址指令

　　　　　　　１２位操作码　　　最多１５条一地址指令

　　　　　　　１６位操作码　　　１６条０地址指令

　　　　　　　三地址指令操作码没减少一种最多可以构成２＾４种地址指令

　　　　　　　二地址指令操作码每减少一种最多可构成２＾４种地址指令

　　　　　　　经常出现的用短操作码

　　２．地址码

　　　　（１）四地址

　　　　　　８　６　６　６　６

　　　　　ａ１第一操作数地址　　设指令子长位３２位

　　　　　ａ２第二操作数地址　　操作码固定位８位

　　　　　ａ３结果地址　４次访问

　　　　　ａ４下一跳指令地址　寻址范围　２＾６＝６４

　　　　　（Ａ１）ｏｐ（Ａ２）－》Ａ３

　　　　　　　ｐｃ代替ａ４

　　　　　（２）三地址　　４次访存

　　　　　　　　　　　　　寻址范围２＾８＝２５６

　　　　　　若Ａ３用ａ１或ａ２替代

　　　　　（３）二地址　　　　　　　４次访存

　　　　　　　８　１２　１２　　　　　　寻址范围２＾１２＝４Ｋ

　　　　　　　若结果存在与ＡＣＣ　３次访存

　　　　　（４）一地址　　　　　　　　　２　次访存

　　　　　　　（ＡＣＣ）ｏｐ（Ａ１）－》ＡＣＣ　

　　　　　　　　　　　　　　　　　　　　寻址范围　２＾２４＝１６Ｍ

　　　　　（５）０地址

　　　　　　　　没地址

　　　　　　　　对ａｃｃ操作

二，指令字长

　　　　　　　　　｜操作码的长度

指令字长决定与　　｜操作数地址长度

　　　　　　　　　｜操作数地址个数

１，指令字长　固定

　　　　指令字长＝存储字长

２，指令字长　可变

　　　　按字节的倍数变化

小结：

当用一些硬件资源代替指令字总的地址码字段后

　可以扩大指令的寻址范围

　可缩短指令字长

　可减少访存次数

当指令的地址字段位寄存器时

　三地址　ｏｐ

　二地址

　一地址

　可以缩短指令的字长

　指令执行过程不访问内存

### 7.2，操作数类型和操作类型

一，操作数类型

　地址　　无符号整数

　数字　　定点数　浮点数　１０禁止数

　字符　　ａｓｃｉｉ

　逻辑数　逻辑运算

二，数据在存储器中的存放方式

　　低地址存放，高地址存放

　　－字节编址，数据在存储器中的存放方式（存储字长６４位，机器字长３２位）

　　ａ从任意位置开始存储

　　优点：不浪费资源

　　缺点：除了访问一个字节之外，访问其他任何类型的编码都可能话费两个存储周期的时间，读写控制比较复杂

　　b从一个存储字的起始卫视开始访问

　　　优点：无论访问何种类型的数据，在一个周期均可完成，读写控制简单

　　　缺点：资源浪费了宝贵的存储资源

　　ｃ，边界对准方式－－从地址的整数倍位置开始访问

　　按照存放的起始地址是数据长度（按照进行计算）的整数倍

　　　本方案是前两个方案的折中，在一个周期可以完成存储访问，空间浪费不太严重

三，操作类型

　１，数据传送

　　　源　　　寄存器　　寄存器　　　存储器　　存储器

　　　目的　　寄存器　　存储器　　　寄存器　　存储器

　　　例如：　ｍｏｖ　ｓｔｏｒｅ　　ｌｏａｄ　ｍｏｖｅ

　　　　　　　　　　　　ｍｏｖｅ　　ｍｏｖｅ

　２，算术逻辑操作

　　　加减乘除，增１　减１　求补　浮点运算　　与或非　亦或，位操作　　为求反

　３，移位操作

　　　算术移位　逻辑移位

　　　循环移位（带进位，不带进位）

　４，转移

　　　１，无条件转移　ｊｍｐ

　　　２，条件转移

　　　３，调用和返回

　　　４，陷阱与陷阱指令（）

　　　　　意外事故的中断

　　　　　（隐指令）

　　　５，输入输出

　　　　　入　　端口中的内容　－ｃｐｕ的寄存器

　　　　　如　ｉｎ　ａｘ，ｎ　

### 7.3，寻址方式

　寻址方式　确定本条指令的操作数地址

　　　　　　下一条要执行指令的指令地址

　　　　　　　　　　　｜　指令寻址

　　　　　　寻址方式　｜　数据寻址

一，指令的寻址

　顺序寻址（ｐｃ＋１）－》ｐｃ　是指令的长度（按）

　跳跃寻址　　由转移指令指出（可以构成循环）

二，数据寻址

　　操作码　寻址特征　　　　形式地址A

　　形式地址　指令字中的地址

　　有效地址　操作数的真实地址

　　约定：　指令字长＝存储字长＝机器字长

　　１，立即数寻址

　　　　形式地址Ａ就是操作数

　　　　指令执行阶段不访存

　　　　Ａ的位数限制了立即数的范围

　　２，直接寻址

　　　　ＥＡ＝Ａ　有效地址由显示地址直接给出

　　　　执行阶段访问一次存储器

　　　　Ａ的位数决定了该指令操作数的寻址范围

　　　　操作数的地址不易修改

　　３，隐含寻址

　　　　操作数地址隐含在操作码中

　　　　另一个操作数隐含在ａｃｃ中

　　４，间接寻址

　　　　ＥＡ＝（Ａ）有效地址由形式地址间接提供

　　　　执行指令阶段２次访存

　　　　可扩大寻址范围

　　　　便于编制程序

　　５，寄存器寻址

　　　　ＥＡ－Ｒ　有效地址即位寄存去的编号

　　　　执行阶段不访存，只访问寄存器，执行速度快

　　　　寄存器个数有限　可缩短指令字长

　　６，寄存器间接寻址

　　　　ＥＡ　有效地址在寄存器中

　　　　有效地址在寄存器中，操作数在寄存器中，执行阶段

　　　　便于编制循环程序

　　７，基址寄存器

　　　　（１）采用专用寄存器做为基址寄存器

　　　　　　ＥＡ＝（ＢＲ）＋Ａ　ＢＲ　为基址寄存器

　　　　　可扩大寻址范围

　　　　　有利于多道程序

　　　　　ＢＲ内容由操作系统或管理程序确定

　　　　　在程序的执行过程中ＢＲ内容不变，形式地址Ａ可变

　　　　　（２）采用通用寄存器作基址寄存器

　　　　　　　　由用户指定那个通用寄存器做为基址寄存器

　　　　　　　　基址寄存器的内容由操作系统确定

　　　　　　　　在程序执行过程中ｒ。内容不变，形式地址ａ可变

　　　８，变址寻址

　　　　　ＥＡ（ｉＸ）＋ａ　ｉｘ可以采用专用

　　　　　　　　　　　　　　也可以用通用寄存器

　　　　　扩大寻址范围

　　　　　ｉｘ内容由用户给定

　　　　　在程序的执行过程中ｉｘ内容可变，形式地址ａ不变

　　　　　便于处理数组问题

### 7.4，指令格式举例

### 7.5，RISC技术

## cpu 678





## cu 9-10

