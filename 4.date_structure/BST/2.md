从记住情况，到推导情况

### 红黑树

#### 五个条件

1. 每个节点非黑即红
2. 根节点是黑色
3. 叶节点是黑色
4. 如果一个节点是红色，则他的两个子节点都是黑色
5. 从根节点出发到所有叶节点路径上，黑色节点数量相同

#### 调整策略

1. 插入调整站在祖父节点看
2. 删除调整站在父节点看
3. 插入和删除的情况处理一共五种

#### 插入调整策略

第一插入的颜色要是红色，因为如果是黑色的化，插入某一条支路中黑色的节点会增加，其他支路的黑色节点不变调整起来比较麻烦

如果插入位置父亲节点是黑色没有影响，如果插入位置父亲节点是红色，违反性质四，这时如果叔父节点是红色，可以红色节点上顶，原来爷爷节点一定是黑色（性质四推导），叔父和爸爸变成黑色，爷爷变成红色，从爷爷看没有影响

这时如果叔父节点是黑色，如果是ＬＬ性直接一个大右旋，然后父亲节点变成黑色，原爷爷节点编程红色即可，如果是LＲ类型的，先一个小左旋，不变色，然后同上

情况一　uncle是红

处理方法：１和２０修改成黑色，１５修改成红色（所谓的红色上顶）



情况二　uncle是黑

处理方法：大右（左）旋，原爷爷变成黑色，原爸爸变成黑色

#### 删除调整情况

颜色和数值是两种信息的叠加，

维护平衡颜色，维护排序键值

先思考大致有六中情况，度为０，１，２，颜色为红黑，

如果删除度为２的节点，让他的前驱覆盖他去他的子树中删除，度为１的前驱节点

然后剩下四种情况，度为０，１，颜色为黑红

然后来开，如果删除颜色为红的节点不影响红黑树的性质，可以直接删除

然后剩下２中情况，度为０，１，颜色为黑

我们将虚拟节点看成一条支路

然后就剩下一种情况，度为１，黑色

如果发生双重黑色一定有ｂｒｏｔｈｅｒ节点，

因为如果发生双重黑，证明删除的节点是一个黑色节点，且有一个色的叶子节点，或者虚拟节点，如果为虚拟节点的化，原本插入的一定是红色所以叶子节点应该为红色，但是如果发生了例如ＬＬ型双重红色会进行大右旋，然后调色就出现了，就有了兄弟节点，

删除度为一的节点，他一定有兄弟节点．父亲节点一定有，不然父亲下每条

兄弟节点为红色旋转，父亲旋转，改变父节点和兄弟节点的颜色，就变成了兄弟节点是黑色的了

情况一：

有兄弟节点为黑色，兄弟节点带两个黑色节点，

处理办法：ｂ调整为红色，ｘ减少一重黑色，ｆ增加一重黑色（黑色上浮）

情况二：

有兄弟节点且是ＬＲ或为ＲＬ类型的

小右选或者左旋，交换父亲和子欧诺个地的颜色，就变成了ＬＬ，
RR类型，可以看情况三

情况三：

对于ＬＬ，ＲＲ类型的

大左（右）旋，然后交换兄弟节点和儿子父亲节点的颜色，兄弟节点的另一个孩子由红色变成黑色

![](/home/tesla/github/learn/4.date_structure/BST/删除RR(LL).jpg)